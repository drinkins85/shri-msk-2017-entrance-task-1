"use strict";!function(){function e(e){r=t(),r.classList.add("modal-window_visible"),document.body.classList.add("modal-enabled"),c=r.querySelector("[data-type=modal-loader]"),c.classList.add("modal-window__load-indicator_visible"),setTimeout(function(){r.classList.add("modal-window__overlay")},1),l=r.querySelector("[data-type=modal-container]");var a=this.getAttribute("href"),i=this.getAttribute("data-modal");switch(s=r.querySelector("[data-type=modal-hider]"),i){case"inline":var m=void 0,u=document.querySelector(a);u?m=u.innerHTML:(m="Error",console.error("Can't find inline-block")),d(m);break;case"image":var v=document.createElement("div");v.style.display="none";var w=document.createElement("img");w.setAttribute("src",a),w.classList.add("modal-window__image"),document.body.appendChild(v),v.appendChild(w),w.onload=function(){d(w.outerHTML),document.body.removeChild(v)};break;case"ajax":var p=new XMLHttpRequest;p.open("GET",a,!0),p.send(),p.onreadystatechange=function(){if(4===p.readyState)if(200!==p.status)console.error("[Modal] Content loading error"+p.status+": "+p.statusText);else{var e=document.getElementById("forXHR");e.innerHTML=p.responseText,d(p.responseText)}};break;default:var y=document.createElement("div");y.innerHTML="Error",y.className="modal-window__error",content=y,console.log("Wrong content type in data-modal-type")}addEventListener("keydown",function(e){return o(e)}),r.addEventListener("click",function(e){return n(e)}),e.preventDefault()}function t(){var e=void 0;if(document.querySelector("[data-type=modal-window]"))e=document.querySelector("[data-type=modal-window]");else{var t=document.createElement("div");t.classList.add("modal-window"),t.setAttribute("data-type","modal-window");var d=document.createElement("div");d.setAttribute("data-type","modal-hider"),d.style.display="none";var a=document.createElement("div");a.classList.add("modal-window__load-indicator"),a.setAttribute("data-type","modal-loader");var o=document.createElement("div");o.classList.add("modal-window__container"),o.setAttribute("data-type","modal-container");var n=document.createElement("div");n.classList.add("modal-window__close"),n.setAttribute("data-type","modal-close-button"),n.innerHTML="&#10761;";var i=document.createElement("div");i.classList.add("modal-window__content"),i.setAttribute("data-type","modal-content"),o.appendChild(n),o.appendChild(i),o.appendChild(i),t.appendChild(a),t.appendChild(o),t.appendChild(d),document.body.appendChild(t),e=t}return e}function d(e){l=r.querySelector("[data-type=modal-container]"),i=l.querySelector("[data-type=modal-content]"),i.innerHTML=e,c.classList.remove("modal-window__load-indicator_visible"),l.classList.add("modal-window__container_visible"),i.offsetHeight+25>window.innerHeight&&r.classList.add("modal-window_scroll"),setTimeout(function(){l.classList.add("modal-window__container_scale")},1),l.querySelector("[data-type=modal-close-button]").addEventListener("click",a)}function a(){l.classList.remove("modal-window__container_scale"),r.classList.remove("modal-window__overlay"),s.innerHTML="",setTimeout(function(){r.classList.remove("modal-window_visible"),r.classList.remove("modal-window_scroll"),l.classList.remove("modal-window__container_visible")},100),document.body.classList.remove("modal-enabled")}function o(e){"27"==e.keyCode&&a()}function n(e){for(var t=e.target,d=!0;t!==r;){if(t===l)return void(d=!1);t=t.parentNode}d&&a()}var i=void 0,l=void 0,r=void 0,s=void 0,c=void 0,m=void 0;m=document.querySelectorAll("[data-modal]");for(var u=0;u<m.length;u++)m[u].addEventListener("click",function(t){e.call(this,t)})}();